{# Module Styling #}
{% require_css %}
<style>
{% scope_css %}

  {% if module.styles.background.color.color %}
  .sticky-scroller {
    background-color: rgba({{ module.styles.background.color.color|convert_rgb }}, {{ module.styles.background.color.opacity / 100 }});
  }
  {% endif %}
    
  {% if module.styles.eyebrow_text.text.color.color %}
  .sticky-scroller__eyebrow-text {
    color: {{ module.styles.eyebrow_text.text.color.color }};
  }
  {% endif %}

{% end_scope_css %}
</style>
{% end_require_css %}

{# Tabbed Sticky Scroller #}
<div class="sticky-scroller relative{% if !module.styles.background.color.color %} bg-[#FCFDFE]{% endif %}">

  {# Tabs #}
  <div class="hidden md:block bg-[#F2F5F7] sticky top-[103px] z-10 px-4">
    <div class="sticky-scroller__tabs flex flex-row justify-center my-0 mx-auto w-full max-w-[1224px]">
      {% for item in module.sections %}
      <div class="sticky-scroller__tab border-b-4 border-solid border-transparent my-0 mx-[12px] py-[8px] px-[16px] cursor-pointer{% if loop.first %} is-first{% endif %}" id="stickyScrollerTab{{ loop.index }}" data-target="{{ loop.index }}">
        {% if item.tab.icon.src %}
          {% set loadingAttr = item.tab.icon.loading != 'disabled' ? 'loading="{{ item.tab.icon.loading|escape_attr }}"' : '' %}
          <img src="{{ item.tab.icon.src|escape_url }}" alt="{{ item.tab.icon.alt|escape_attr }}" {{ loadingAttr }} width="{{ item.tab.icon.width|escape_attr }}" height="{{ item.tab.icon.height|escape_attr }}">
        {% endif %}
        <span>{{ item.tab.title }}</span>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="flex flex-row flex-wrap my-0 mx-auto w-full max-w-[1224px] px-4 pt-[50px]">
    {# Content Column #}
    <div class="w-full md:w-2/4 md:pr-[120px]">
      {% set numberOfSections = module.sections|length %}
      {% for item in module.sections %}
      {% if loop.first %}
      <div class="sticky-scroller__section flex my-8 mx-0 px-0 pb-8 md:pb-0 w-full md:h-[60svh] scroll-mt-60" data-section-number="{{ loop.index }}" data-number-of-sections="{{ numberOfSections }}">
      {% else %}
      <div class="sticky-scroller__section flex items-center my-8 mx-0 px-0 pb-8 md:pb-0 w-full md:h-[600px]" data-section-number="{{ loop.index }}" data-number-of-sections="{{ numberOfSections }}">
      {% endif %}
        <div>
          <div class="flex items-center justify-center items-center mb-8 md:hidden">
            {% set loadingAttr = item.image.loading != 'disabled' ? 'loading="{{ item.image.loading|escape_attr }}"' : '' %}
            <img src="{{ item.image.src|escape_url }}" alt="{{ item.image.alt|escape_attr }}" {{ loadingAttr }} width="{{ item.image.width|escape_attr }}" height="{{ item.image.height|escape_attr }}">
          </div>
          <div class="sticky-scroller__eyebrow-text inline-block uppercase font-bold text-[16px]]{% if !module.styles.eyebrow_text.text.color.color %} text-[#2A7991]{% endif %} tracking-[.004em]">{{ item.eyebrow_text }}</div>
          <div class="border-b-[1px] border-solid border-[#EEE7E4] max-w-[450px]"></div>
          <div class="mt-[10px]">{{ item.content }}</div>
          {% if item.buttons|length > 0 %}
          <div>
            {% for item2 in item.buttons %}
              {% set href = item2.link.url.href %}
              {% if item2.link.url.type is equalto "EMAIL_ADDRESS" %}
                {% set href = "mailto:" + href %}
              {% endif %}
              <a class="btn btn-{{ item2.style }}" href="{{ href|escape_url }}"{% if item2.link.open_in_new_tab %} target="_blank"{% endif %}{% if item2.link.rel %} rel="{{ item2.link.rel|escape_attr }}"{% endif %}>
                {{ item2.text }}
              </a>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>

    {# Images #}
    <div class="hidden md:flex items-center justify-center h-[60svh] sticky top-[20vh] w-full md:w-2/4">
      {% for item in module.sections %}
      <div class="sticky-scroller__image absolute {% if not loop.first %} is-hidden{% endif %}" id="stickyScrollerImage{{ loop.index }}">
        {% set loadingAttr = item.image.loading != 'disabled' ? 'loading="{{ item.image.loading|escape_attr }}"' : '' %}
        <img src="{{ item.image.src|escape_url }}" alt="{{ item.image.alt|escape_attr }}" {{ loadingAttr }} width="{{ item.image.width|escape_attr }}" height="{{ item.image.height|escape_attr }}">
      </div>
      {% endfor %}
    </div>
  </div>

<div>